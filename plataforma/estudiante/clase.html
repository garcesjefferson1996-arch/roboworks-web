<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mi Clase - RoboWorks</title>
    <link rel="stylesheet" href="/css/plataforma.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/assets/icons/favicon.ico">
</head>
<body class="plataforma-body">
    <header class="plataforma-header">
        <a href="index.html" class="header-back">
            <i class="fas fa-arrow-left"></i>
        </a>
        <div class="header-logo">
            <img src="/assets/icons/logo.png" alt="Logo" height="30">
        </div>
        <div class="header-user">
            <span class="user-avatar" id="user-avatar">DF</span>
        </div>
    </header>

    <main class="clase-container">
        <section class="clase-hero">
            <span class="clase-etiqueta">M贸dulo 1 路 Clase 1</span>
            <h1 class="clase-titulo">Bienvenido al Mundo Roblox</h1>
            <p class="clase-subtitulo">La aventura de crear tecnolog铆a con valores y prop贸sito.</p>
            
            <div class="clase-info-horario">
                <div class="info-item">
                    <i class="far fa-calendar"></i>
                    <span id="fecha-hoy">Cargando fecha...</span>
                </div>
                <div class="info-item">
                    <i class="far fa-clock"></i>
                    <span>4:00 PM - 5:30 PM</span>
                </div>
            </div>
        </section>

        <section class="clase-card card-objetivo">
            <h2><i class="fas fa-bullseye"></i> Objetivo de la Clase</h2>
            <p>Acompa帽ar al estudiante en su primer encuentro con Roblox Studio, ayud谩ndolo a descubrir el entorno digital con <strong>confianza, curiosidad y asombro</strong>.</p>
        </section>

        <!--  SECCIN ZOOM DINMICA -->
        <section class="clase-card card-zoom" id="zoom-section">
            <h2><i class="fas fa-video"></i> Acceso a la Clase Virtual</h2>
            
            <div class="zoom-estado">
                <div class="estado-icono">
                    <i class="fas fa-video" id="zoom-icon"></i>
                </div>
                <div class="estado-info">
                    <h3 id="zoom-estado-texto">Clase programada</h3>
                    <p id="zoom-detalle">El enlace estar谩 disponible antes de la clase</p>
                </div>
            </div>
            
            <!-- BOTN QUE SE ACTUALIZA AUTOMTICAMENTE -->
            <a href="#" id="boton-zoom" class="btn btn-zoom" target="_blank">
                <i class="fas fa-door-open" id="zoom-btn-icon"></i>
                <span id="zoom-btn-text">Unirme a la Clase</span>
            </a>
            
            <div class="zoom-preparacion">
                <h3><i class="fas fa-clipboard-check"></i> Preparaci贸n:</h3>
                <ul>
                    <li><i class="fas fa-check-circle"></i> Tener instalado <strong>Roblox Studio</strong></li>
                    <li><i class="fas fa-check-circle"></i> Conexi贸n estable a internet</li>
                </ul>
            </div>
        </section>

        <section class="clase-card card-contenidos">
            <h2><i class="fas fa-map-signs"></i> Lo que Exploraremos Hoy</h2>
            <ul class="lista-contenidos">
                <li><i class="fas fa-compass"></i> <strong>驴Qu茅 es Roblox?</strong></li>
                <li><i class="fas fa-desktop"></i> <strong>Primer contacto con Roblox Studio</strong></li>
                <li><i class="fas fa-gamepad"></i> <strong>Interfaz, c谩mara y movimiento</strong></li>
            </ul>
        </section>
    </main>

    <nav class="plataforma-nav">
        <a href="index.html" class="nav-item">
            <i class="fas fa-home"></i>
            <span>Inicio</span>
        </a>
        <a href="clase.html" class="nav-item activo">
            <i class="fas fa-video"></i>
            <span>Clase</span>
        </a>
        <a href="recursos.html" class="nav-item">
            <i class="fas fa-folder-open"></i>
            <span>Recursos</span>
        </a>
    </nav>

    <!-- ZOOM DATA: Admin actualiza esto -->
    <script type="application/json" id="zoom-data">
    {
        "clases": [
            {
                "fecha": "2024-06-10",
                "hora": "16:00",
                "duracion": 90,
                "enlace": "https://zoom.us/j/1234567890",
                "activa": true
            },
            {
                "fecha": "2024-06-17",
                "hora": "16:00",
                "duracion": 90,
                "enlace": "https://zoom.us/j/9876543210",
                "activa": true
            }
        ]
    }
    </script>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // 1. FECHA ACTUAL
        function mostrarFecha() {
            const hoy = new Date();
            const opciones = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const fechaStr = hoy.toLocaleDateString('es-EC', opciones);
            document.getElementById('fecha-hoy').textContent = 
                fechaStr.charAt(0).toUpperCase() + fechaStr.slice(1);
        }

        // 2. LGICA INTELIGENTE DE ZOOM
        function actualizarZoom() {
            const hoy = new Date();
            const hoyStr = hoy.toISOString().split('T')[0]; // YYYY-MM-DD
            const ahora = hoy.getHours() * 60 + hoy.getMinutes(); // Minutos del d铆a
            
            try {
                const zoomData = JSON.parse(document.getElementById('zoom-data').textContent);
                const clases = zoomData.clases;
                
                // Buscar clase de HOY
                const claseHoy = clases.find(c => c.fecha === hoyStr && c.activa);
                
                const boton = document.getElementById('boton-zoom');
                const icono = document.getElementById('zoom-icon');
                const btnIcono = document.getElementById('zoom-btn-icon');
                const btnTexto = document.getElementById('zoom-btn-text');
                const estadoTexto = document.getElementById('zoom-estado-texto');
                const detalle = document.getElementById('zoom-detalle');
                
                if (!claseHoy) {
                    // NO hay clase hoy
                    estadoTexto.textContent = 'No hay clase programada';
                    detalle.textContent = 'Consulta el calendario para pr贸ximas clases';
                    icono.className = 'fas fa-calendar-times';
                    boton.style.display = 'none';
                    return;
                }
                
                // Calcular tiempos
                const [horas, minutos] = claseHoy.hora.split(':').map(Number);
                const inicioMinutos = horas * 60 + minutos;
                const finMinutos = inicioMinutos + claseHoy.duracion;
                
                // Determinar estado
                if (ahora < inicioMinutos - 10) {
                    // ANTES (m谩s de 10 min)
                    const minutosFaltan = inicioMinutos - ahora;
                    const horasFaltan = Math.floor(minutosFaltan / 60);
                    const mins = minutosFaltan % 60;
                    
                    estadoTexto.textContent = 'Clase programada';
                    detalle.textContent = `Comienza en ${horasFaltan > 0 ? horasFaltan + 'h ' : ''}${mins}min`;
                    icono.className = 'far fa-clock';
                    btnIcono.className = 'fas fa-lock';
                    btnTexto.textContent = 'Disponible 10 min antes';
                    boton.href = '#';
                    boton.classList.add('btn-deshabilitado');
                    
                } else if (ahora >= inicioMinutos - 10 && ahora < inicioMinutos) {
                    // 10 MIN ANTES
                    estadoTexto.textContent = '隆Clase por comenzar!';
                    detalle.textContent = 'El enlace ya est谩 disponible';
                    icono.className = 'fas fa-hourglass-end';
                    btnIcono.className = 'fas fa-door-open';
                    btnTexto.textContent = 'Unirme a la Clase';
                    boton.href = claseHoy.enlace;
                    boton.classList.remove('btn-deshabilitado');
                    
                } else if (ahora >= inicioMinutos && ahora <= finMinutos) {
                    // DURANTE
                    const minutosTrans = ahora - inicioMinutos;
                    estadoTexto.textContent = '隆Clase en sesi贸n!';
                    detalle.textContent = `Minuto ${minutosTrans} de ${claseHoy.duracion}`;
                    icono.className = 'fas fa-play-circle';
                    btnIcono.className = 'fas fa-door-open';
                    btnTexto.textContent = 'Unirse ahora';
                    boton.href = claseHoy.enlace;
                    boton.classList.remove('btn-deshabilitado');
                    
                } else {
                    // DESPUS
                    const minutosPasaron = ahora - finMinutos;
                    const horasPasaron = Math.floor(minutosPasaron / 60);
                    
                    estadoTexto.textContent = 'Clase finalizada';
                    detalle.textContent = horasPasaron > 0 
                        ? `Finaliz贸 hace ${horasPasaron}h` 
                        : `Finaliz贸 hace ${minutosPasaron}min`;
                    icono.className = 'fas fa-check-circle';
                    btnIcono.className = 'fas fa-check';
                    btnTexto.textContent = 'Clase Completada';
                    boton.href = '#';
                    boton.classList.add('btn-deshabilitado');
                }
                
                boton.style.display = 'block';
                
            } catch (e) {
                console.error('Error cargando datos Zoom:', e);
            }
        }

        // 3. EJECUTAR
        mostrarFecha();
        actualizarZoom();
        setInterval(actualizarZoom, 60000); // Actualizar cada minuto
    });
    </script>
</body>
</html>